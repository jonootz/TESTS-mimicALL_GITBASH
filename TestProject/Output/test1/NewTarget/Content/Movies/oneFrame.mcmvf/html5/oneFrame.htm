<!DOCTYPE html>
<html data-mc-ignore="true">
    <head>
        <title>oneFrame</title>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
        <link rel="stylesheet" type="text/css" href="Data/Assets/css/Player.css" />
        <link rel="stylesheet" type="text/css" href="css/oneFrame.css" />
        <script type="text/javascript" src="scripts/jquery-1.8.3.min.js">
        </script>
        <script type="text/javascript" src="scripts/jquery-ui-1.9.2.custom.min.js">
        </script>
        <script type="text/javascript" src="scripts/jquery.ui.touch-punch.min.js">
        </script>
        <script type="text/javascript" src="scripts/kinetic-v4.4.0.madcap.js">
        </script>
        <script type="text/javascript" src="scripts/modernizr.custom.js">
        </script>
        <script type="text/javascript" src="scripts/oneFrame.js">
        </script>
        <script type="text/javascript">/*<![CDATA[*/
function Frame(a,f){this.movie=a;this.hasVideo=false;this.frameIndex=f;this.group=new Kinetic.Group();this.movie.layer.add(this.group);this.name=Helper.GetFrameName(f);this.hasCursorAction=false;if(f!=0){this.shapes=new Array();var e=MovieProps[this.name];this.frameStart=parseInt(e.frameStart);this.frameDuration=parseInt(e.frameDuration);this.frameEnd=this.frameStart+this.frameDuration;this.hasVideo=e.hasVideo;this.pauseAtEnd=e.pause;this.hasTransition=e.transitionEffect!="";this.transitionEffect=e.transitionEffect;this.transitionDirection=e.transitionDirection;this.transitionDuration=parseInt(e.transitionDuration);this.SetTransition();for(var d=0;d<Object.keys(MovieShapes[this.name]).length;d++){var b=new Shape(MovieShapes[this.name][d],this.group,this);if(b.hasCursorAction){this.hasCursorAction=true}this.shapes.push(b)}for(var c=0;c<this.shapes.length;c++){this.shapes[c].SetAssociatedRollovers(this.shapes);if(this.shapes[c].type=="cursor-ellipse"&&!this.hasCursorAction){this.shapes[c].SetAnimation();this.shapes[c].AddAnimations();this.shapes[c].isDynamic=false}if(this.shapes[c].type=="input"){this.shapes[c].SetInputCallouts(this.shapes)}if(this.shapes[c].type=="background"){this.shapes[c].kShape.moveToBottom()}}}}Frame.prototype.setVisible=function(d){this.group.setVisible(d);if(d){for(var c=0;c<this.shapes.length;c++){var b=this.shapes[c];var a=["bubble-rollover","bubble-hint","bubble-success","bubble-failure"];if(a.indexOf(b.pathType)==-1&&b.type!="cursor-ellipse"){if(b.kShape.getOpacity()!=b.origOpacity){b.kShape.setOpacity(b.origOpacity)}}}}};Frame.prototype.StartCursor=function(){for(var a=0;a<this.shapes.length;a++){if(this.shapes[a].type=="cursor-ellipse"&&this.hasCursorAction){this.shapes[a].SetAnimation();this.shapes[a].animations.length=0;this.shapes[a].AddAnimations();this.shapes[a].interactedTime=Movie.video.paused?new Date().getTime()-Movie.startTime:Movie.time}}};Frame.prototype.TryAccept=function(){for(var a=0;a<this.shapes.length;a++){if(this.shapes[a].type=="input"){this.shapes[a].HandleInputSubmit(this.shapes[a].inputTextShape.getText())}}};Frame.prototype.ClearInteractiveAnimations=function(){for(var b=0;b<this.shapes.length;b++){var a=["bubble-rollover","bubble-hint","bubble-success","bubble-failure"];if(a.indexOf(this.shapes[b].pathType)!=-1){this.shapes[b].kShape.hide();this.shapes[b].animations.length=0}if(this.type=="cursor-ellipse"&&this.hasCursorAction){this.shapes[b].animations.length=0}}};var Enum=new Object();var Helper={GetFrameName:function(a){return"frame"+a},GetFrameBackgroundId:function(a){return"#"+a+"_background"},GetFrameBorderId:function(a){return"#"+a+"_border"},ZeroPad:function(b,a){var c=a-b.toString().length+1;return Array(+(c>0&&c)).join("0")+b},GetTimeString:function(b){var a=Math.floor((b/1000)/60);var c=Math.round((b/1000)-a*60);if(c==60){a++;c=0}return a+":"+Helper.ZeroPad(c,2)}};var mcButtons=new Array();var VolumePopup=null;var Progressbar=null;function FMimicAboutBox(a){window.open(a.getAttribute("mcAboutPage"),"mAbout",a.getAttribute("mcAboutWindowCommands"))}function FMimicHomePage(a){document.location.href=a.getAttribute("mcHome")}function FMimicGotoSection(a){document.location.href=a}function FMimicOnSelectSection(a){document.location.href=a.options[a.selectedIndex].getAttribute("value")}function FMimicGotoNext(b,a){Movie.GotoNext()}function FMimicGotoPrev(b,a){Movie.GotoPrevious()}function FMimicGotoFirst(b,a){Movie.GotoFirst()}function FMimicGotoLast(b,a){Movie.GotoLast()}function FMimicGotoNextMovie(b,a){Movie.GotoNextMovie()}function FMimicGotoPrevMovie(b,a){Movie.GotoPreviousMovie()}function FMimicPause(b,a){if(Movie.startTime==-1){StartMobile();return}if(typeof(Movie.paused)=="boolean"){Movie.TogglePause();FMimicCheckPauseButton()}}function FMimicReplay(b,a){$("a.playButton").attr("onclick","FMimicPause()");FMimicGotoFirst();Movie.Play()}function FMimicUpdateUI(d){if(typeof(gMCInPreview)!="undefined"&&gMCInPreview){return}var a=d.split(":");var e=a[0];var b=a[1];var c=a[2];FMimicEnableButton(document.body,"First",b>0);FMimicEnableButton(document.body,"Back",e>0);FMimicEnableButton(document.body,"Forward",e<b-1);FMimicEnableButton(document.body,"Pause",e<b)}function FMimicEnableButton(d,c,b){for(var a in FMimicGetButtons(d,c)){if(!b==a.disabled){return}a.disabled=!b;if(a.disabled){FResetStyleAttributes(a)}return true}}function FMimicCollectButtons(c,a,d){if(c.getAttribute("mcControlType")==a){d[d.length]=c;return true}for(var b=0;b<c.childNodes.length;b++){var e=c.childNodes[b];if(e.nodeType!=1){continue}FMimicCollectButtons(e,a,d)}return false}function FMimicCheckPauseButton(){FMimicCheckPauseButton(false)}function FMimicCheckPauseButton(a){if(Movie.paused){$("a.playButton").removeClass("playing").addClass("paused")}else{$("a.playButton").removeClass("paused").addClass("playing")}if(a){$("a.playButton").attr("onclick","FMimicReplay()")}else{$("a.playButton").attr("onclick","FMimicPause()")}}function FAddToLog(a){var b=document.getElementById("log");if(b==null||typeof(b)=="undefined"){return}b.appendChild(document.createTextNode(a));b.appendChild(document.createElement("br"));b.childNodes[b.childNodes.length-1].scrollIntoView()};var Movie={root:null,frames:null,duration:0,lastFrameIndex:null,currentFrameIndex:null,endActionFunc:null,endActionArg:null,paused:false,pausedAtFrameEnd:false,pausedTime:0,media:null,video:null,time:0,startTime:-1,volume:50,muted:false};Movie.FirstFrameIndex=function(){return 1};Movie.LastFrameIndex=function(){return Movie.lastFrameIndex};Movie.CurrentFrame=function(){return Movie.frames[Movie.currentFrameIndex]};Movie.PreviousFrame=function(){return Movie.frames[Movie.currentFrameIndex-1]};Movie.TogglePause=function(){if(this.paused){this.Play()}else{this.Pause()}};Movie.GotoFrame=function(b){Movie.getCurrentFrame().ClearInteractiveAnimations();var a=this.getFrameByIndex(b);if(a!=null){if(isMobile.iOS()){this.Seek(a.frameStart+60)}else{this.Seek(a.frameStart)}}};Movie.GotoNext=function(){var a=this.getCurrentFrame().frameIndex;if(a<this.LastFrameIndex()){this.GotoFrame(a+1)}};Movie.GotoPrevious=function(){var a=this.getCurrentFrame();if((Movie.time-a.frameStart>=1500)||(a.frameIndex==this.FirstFrameIndex())){this.GotoFrame(a.frameIndex)}else{if(a.frameIndex>this.FirstFrameIndex()){this.GotoFrame(a.frameIndex-1)}}};Movie.GotoFirst=function(){Movie.GotoFrame(Movie.FirstFrameIndex())};Movie.GotoLast=function(){Movie.GotoFrame(Movie.LastFrameIndex())};Movie.GotoNextMovie=function(){if(MovieIndex<Movies.length-1){document.location.href=Movies[MovieIndex+1]}};Movie.GotoPreviousMovie=function(){if(MovieIndex>0){document.location.href=Movies[MovieIndex-1]}};Movie.DownloadMedia=function(h){Movie.media=new Object();var d=0;var g=0;for(var c=1;c<=Movie.lastFrameIndex;c++){var e="frame"+c;var k=MovieShapes[e];Movie.media[e]=new Array();for(var b=0;b<k.length;b++){if(k[b].shape=="image"||k[b].shape=="cursor-ellipse"||(typeof k[b].imageSource!=="undefined")){var a=document.createElement("img");a.onload=function(){d++;this.onload=null;if(d===g){if(h){h()}}};a.src=k[b].imageSource;if(Movie.isRecording()){document.body.appendChild(a)}Movie.media[e].push(a);g++}}}if(g===0){if(h){h()}}};Movie.FindMediaElement=function(d,c){var a=Movie.media[d];for(var b=0;b<a.length;b++){if(a[b].getAttribute("src")===c){return a[b]}}};Movie.Initialize=function(){var a=this;a.frames=new Array();a.layer=new Kinetic.Layer();a.stage=stage;a.stage.add(Movie.layer);for(var c=1;c<=Movie.lastFrameIndex;c++){var e=new Frame(this,c);a.frames.push(e);this.duration+=e.frameDuration}if(Movie.isRecording()){window.external.init()}else{if(typeof $("#movie_media")[0]!=="undefined"){a.video=$("#movie_media")[0]}var b=$(".timeline");b.slider({range:"min"});b.on("slide",function(f,g){a.Seek((g.value/100)*a.duration)});var d=$(".volume");d.slider({range:"min",orientation:"vertical",value:50});d.on("slide",function(f,g){a.SetVolume(g.value)});$(".volumeButton").on("click",function(f){a.SetVolume(a.muted?a.volume:0)})}};Movie.SetVolume=function(b){if(this.video!=null){this.video.volume=(b/100)}var a=b==0;if(!a){this.volume=b;this.muted=false;$(".volumeButton").removeClass("muted")}else{this.muted=true;$(".volumeButton").addClass("muted")}$(".volume").slider("option","value",b)};Movie.Play=function(){var a=this;if(!Movie.isRecording()){this.paused=false;this.startTime=new Date().getTime()-this.time;$("span.timeTotalSpan").html(Helper.GetTimeString(this.duration));if(Movie.video!==null){Movie.video.play()}this._animationLoop();FMimicCheckPauseButton()}};Movie.Pause=function(){this.paused=true;if(this.video!=null){this.video.pause()}FMimicCheckPauseButton()};Movie.End=function(){this.paused=true;if(this.video!=null){this.video.pause()}FMimicCheckPauseButton(true)};Movie.Seek=function(c){FMimicCheckPauseButton();var b=this.paused;if(!b){this.Pause()}this.time=c;this._render(c);if(this.video!=null){var a=this.video.currentTime;this.video.currentTime=(c/1000);if(this.video.currentTime==a){this.video.currentTime=((c+30)/1000)}}if(!b){this.Play()}Movie.pausedAtFrameEnd=false};Movie.CaptureImage=function(a){this._render(a);return this.layer.getCanvas().toDataURL()};Movie.RemovePlayingEvent=function(){Movie.video.removeEventListener("playing",Movie.RemovePlayingEvent,false)};Movie.getCurrentFrame=function(){return this.getFrameByTime(this.time)};Movie.getFrameByTime=function(b){for(var a=0;a<this.frames.length;a++){var c=this.frames[a];if((c.frameStart<=b)&&((c.frameStart+c.frameDuration)>b)){return c}if((a==(this.frames.length-1))&&((c.frameStart+c.frameDuration)<=b)){return c}}return null};Movie.getFrameByIndex=function(a){for(var b=0;b<this.frames.length;b++){var c=this.frames[b];if(c.frameIndex==a){return c}}return null};Movie.isRecording=function(){return typeof window.external!=="undefined"&&window.external!=null&&typeof window.external.isGenerator!=="undefined"};Movie._animationLoop=function(){var e=Movie.video.currentTime;var d=0;if(typeof e!=="undefined"){d=Math.round(e*1000);if(d>=Movie.duration){d=Movie.duration-5;this.End()}}var a=this.getFrameByTime(this.time);var c=this.getFrameByTime(d)!=a;var f=a.pauseAtEnd&&c&&!this.pausedAtFrameEnd&&(this.pausedTime!=Math.round(this.time))&&!this.paused;if(c&&this.pausedAtFrameEnd&&!this.paused){this.pausedAtFrameEnd=false}if(f){d=a.frameEnd-20;if(this.video!=null){this.Pause();this.video.currentTime=(d/1000);this.pausedAtFrameEnd=true;this.pausedTime=d}}else{if(this.pausedTime>Math.round(this.time)){this.pausedTime=0}}this._render(d);var b=this;Kinetic.Animation.requestAnimFrame(function(){b._animationLoop()})};Movie._render=function(d){this.time=d;if(!Movie.isRecording()){var n=(this.time/this.duration)*100;$(".timeline").slider("option","value",n);$(".timeProgressSpan").html(Helper.GetTimeString(this.time))}var b=this.getFrameByTime(this.time);for(var h=0;h<this.frames.length;h++){var a=this.frames[h];var c=a==b;a.setVisible(c);if(c){if(typeof a.transitionAnim!=="undefined"){if(h>0&&!a.hasVideo){this.frames[h-1].setVisible(true)}a.transitionAnim.func(this.time)}for(var g=0;g<a.shapes.length;g++){var l=a.shapes[g];for(var f=0;f<l.animations.length;f++){var e=l.animations[f];e.func(this.time)}}}}var m=b.hasVideo?0:-1;$(this.video).css("z-index",m);this.layer.getContext().clearRect(0,0,this.layer.getCanvas().width,this.layer.getCanvas().height);this.layer.draw()};function Shape(c,b,d){this.kShape;this.animations=[];this.inAnim;this.outAnim;this.mainAnim;this.id=c.id;this.type=c.shape;this.group=b;this.parentFrame=d;this.start=c.start+d.frameStart;this.duration=c.duration;this.isDynamic=false;this.interactedTime;if(this.duration==2147483647){this.duration=d.frameDuration}this.end=this.start+this.duration;this.origX=c.x+(c.width/2);this.origY=c.y+(c.height/2);this.origWidth=c.width;this.origHeight=c.height;this.origOpacity=c.opacity;this.animation=c.animation;this.inEffect=c.inAnim;this.outEffect=c.outAnim;this.rollover=c.rollover;this.hasCursorAction=false;this.currentTimeMS=0;this.InitializeKShape(c);this.SetActions(c);var a=["bubble-rollover","bubble-hint","bubble-success","bubble-failure"];if((a.indexOf(this.pathType)==-1)&&(this.type!="cursor-ellipse")){this.SetAnimation();this.AddAnimations()}else{if(a.indexOf(this.pathType)!=-1){this.kShape.hide()}this.isDynamic=true}this.group.add(this.kShape)}Shape.prototype.InitializeKShape=function(a){if(a.shape==="image"){var c=Movie.FindMediaElement(this.parentFrame.name,a.imageSource);this.kShape=new Kinetic.Image({x:a.x+(a.width/2),y:a.y+(a.height/2),width:a.width,height:a.height,image:c,opacity:a.opacity,cornerRadius:a.cornerRadius,rotationDeg:a.rotation,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});if(typeof a.shadow.color!=="undefined"){this.SetShadow(this.kShape,a.shadow)}}else{if(a.shape==="ellipse"){var v=new Kinetic.Ellipse({x:a.x+(a.width/2),y:a.y+(a.height/2),radius:{x:a.width/2,y:a.height/2},rotationDeg:a.rotation,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth});if(a.fill.color1!=="Transparent"){this.SetFill(v,a.fill)}if(typeof a.shadow.color!=="undefined"){this.SetShadow(v,a.shadow)}if(this.HasText(a)){if(typeof a.imageSource!=="undefined"){this.kShape=new Kinetic.Group({opacity:1});var c=Movie.FindMediaElement(this.parentFrame.name,a.imageSource);var n=3;var t=new Kinetic.Image({x:a.x+(a.width/2)+n,y:this.CalculateVAlignBasedY(a),image:c,opacity:1,rotationDeg:a.rotation,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});this.kShape.add(v);this.kShape.add(t)}else{var o=this.CreateTextOverlay(a.text,a.rotation);this.kShape=new Kinetic.Group({opacity:a.opacity});this.kShape.add(v);this.kShape.add(o)}}else{v.setOpacity(a.opacity);this.kShape=v}}else{if(a.shape==="cursor-ellipse"){this.kShape=new Kinetic.Group({opacity:1});var c=Movie.FindMediaElement(this.parentFrame.name,a.imageSource);var u=new Kinetic.Image({x:a.x+a.width,y:a.y+a.height,image:c,opacity:1,rotationDeg:a.rotation,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});var v=new Kinetic.Ellipse({x:a.x+(a.width/2),y:a.y+(a.height/2),radius:{x:a.width/2,y:a.height/2},opacity:a.opacity,rotationDeg:a.rotation,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth});if(a.fill.color1!=="Transparent"){this.SetFill(v,a.fill)}if(typeof a.shadow.color!=="undefined"){this.SetShadow(v,a.shadow)}this.kShape.add(v);this.kShape.add(u)}else{if(a.shape==="poly"){var g=new Kinetic.Polygon({points:a.data,rotationDeg:a.rotation,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth,});if(a.fill.color1!=="Transparent"){this.SetFill(g,a.fill)}if(typeof a.shadow.color!=="undefined"){this.SetShadow(g,a.shadow)}if(this.HasText(a)){this.kShape=new Kinetic.Group({opacity:a.opacity});if(typeof a.imageSource!=="undefined"){var c=Movie.FindMediaElement(this.parentFrame.name,a.imageSource);var n=3;var t=new Kinetic.Image({x:a.x+(a.width/2)+n,y:this.CalculateVAlignBasedY(a),image:c,opacity:1,rotationDeg:a.rotation,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});this.kShape.add(g);this.kShape.add(t)}else{var o=this.CreateTextOverlay(a.text,a.rotation);this.kShape.add(g);this.kShape.add(o)}}else{g.setOpacity(a.opacity);this.kShape=g}}else{if(a.shape==="line"){this.kShape=new Kinetic.Group({opacity:a.opacity});var m=new Kinetic.Line({points:a.data,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth});if(typeof a.shadow.color!=="undefined"){this.SetShadow(m,a.shadow)}this.kShape.add(m);for(var s=0;s<a.head.length;s++){var b=a.head[s];var d=new Kinetic.Polygon({x:b.x,y:b.y,points:b.data,rotationDeg:b.angle,fill:a.stroke,stroke:a.stroke,shadow:this.ProcessShadow(a.shadow),offset:b.offset});this.kShape.add(d)}for(var r=0;r<a.tail.length;r++){var e=a.tail[r];var k=new Kinetic.Polygon({x:e.x,y:e.y,points:e.data,rotationDeg:e.angle,fill:a.stroke,stroke:a.stroke,shadow:this.ProcessShadow(a.shadow),offset:e.offset});this.kShape.add(k)}}else{if(a.shape==="border"){var q=this.BorderLine(a);this.kShape=q}else{if(a.shape==="rect"||a.shape==="button"||a.shape==="input"||a.shape==="typing"){if(this.HasText(a)){this.kShape=new Kinetic.Group({width:a.width,height:a.height,opacity:1});var h=new Kinetic.Rect({x:a.x+(a.width/2),y:a.y+(a.height/2),width:a.width,height:a.height,opacity:a.opacity,cornerRadius:a.cornerRadius,rotationDeg:a.rotation,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});if(a.fill.color1!=="Transparent"){this.SetFill(h,a.fill)}if(typeof a.shadow.color!=="undefined"){this.SetShadow(h,a.shadow)}this.kShape.add(h);if(typeof a.imageSource!=="undefined"){var c=Movie.FindMediaElement(this.parentFrame.name,a.imageSource);var n=3;var t=new Kinetic.Image({x:a.x+(a.width/2)+n,y:this.CalculateVAlignBasedY(a),image:c,opacity:1,rotationDeg:a.rotation,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});this.kShape.add(t)}else{var o=this.CreateTextOverlay(a.text,a.rotation);this.kShape.add(o)}}else{this.kShape=new Kinetic.Rect({x:a.x+(a.width/2),y:a.y+(a.height/2),width:a.width,height:a.height,opacity:a.opacity,cornerRadius:a.cornerRadius,rotationDeg:a.rotation,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});if(a.fill.color1!=="Transparent"){this.SetFill(this.kShape,a.fill)}if(typeof a.shadow.color!=="undefined"){this.SetShadow(this.kShape,a.shadow)}}}else{if(a.shape==="path"){var l=new Kinetic.Shape({drawFunc:function(i){return function(j){var w=j.getContext();i.DrawPath(w,a);j.fillStroke(this)}}(this),rotationDeg:a.rotation,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth});if(a.fill.color1!=="Transparent"){this.SetFill(l,a.fill)}if(typeof a.shadow.color!=="undefined"){this.SetShadow(l,a.shadow)}if(this.HasText(a)){if(typeof a.imageSource!=="undefined"){this.kShape=new Kinetic.Group({opacity:1});var c=Movie.FindMediaElement(this.parentFrame.name,a.imageSource);var n=3;var f=["bubble-rollover","bubble-hint","bubble-success","bubble-failure","bubble-normal"];var p=a.text.x+(a.text.width/2)+n;if(f.indexOf(this.pathType)!==-1){p=a.text.x+a.text.width-(a.imageWidth/2)}var t=new Kinetic.Image({x:p,y:this.CalculateVAlignBasedY(a),image:c,opacity:1,rotationDeg:a.rotation,offset:[a.text.width/2,a.text.height/2]});this.kShape.add(l);this.kShape.add(t)}else{var o=this.CreateTextOverlay(a.text,a.rotation);this.kShape=new Kinetic.Group({opacity:(a.inAnim&&a.inAnim.effect==="fade")?0:a.opacity});this.kShape.add(l);this.kShape.add(o)}}else{l.setOpacity(a.opacity);this.kShape=l}this.pathType=a.pathType}else{if(a.shape=="background"){this.kShape=new Kinetic.Group({width:a.width,height:a.height,opacity:1});var h=new Kinetic.Rect({x:a.x+(a.width/2),y:a.y+(a.height/2),width:a.width,height:a.height,opacity:a.opacity,cornerRadius:a.cornerRadius,rotationDeg:a.rotation,stroke:(a.strokeWidth===0)?"Transparent":a.stroke,strokeWidth:a.strokeWidth,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});if(a.fill.color1!=="Transparent"){this.SetFill(h,a.fill)}if(typeof a.shadow.color!=="undefined"){this.SetShadow(h,a.shadow)}this.kShape.add(h);if(typeof a.imageSource!=="undefined"){var c=Movie.FindMediaElement(this.parentFrame.name,a.imageSource);var t=new Kinetic.Image({x:a.x+(a.width/2),y:a.y+(a.height/2),image:c,opacity:1,rotationDeg:a.rotation,offset:(typeof a.offset!=="undefined")?a.offset:[0,0]});this.kShape.add(t)}}}}}}}}}}};Shape.prototype.CreateTextOverlay=function(a,b){return new Kinetic.Text({x:a.x+(a.width/2),y:a.y+(a.height/2),width:a.width,height:a.height,fill:a.textFill,stroke:"Transparent",strokeWidth:0,rotationDeg:b,align:a.align,verticalAlign:a.verticalAlign,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:(a.fontStyle=="normal")?a.fontWeight:(a.fontWeight=="normal")?a.fontStyle:a.fontStyle+" "+a.fontWeight,text:a.text,offset:[a.width/2,a.height/2]})};Shape.prototype.SetFill=function(b,a){if(a.type=="solid"){b.setFill(a.color1);b.setFillPriority("color")}else{var c={start:{x:a.start[0],y:a.start[1]},end:{x:a.end[0],y:a.end[1]},colorStops:[0,a.color1,1,a.color2]};b.setFillLinearGradientStartPoint(c.start);b.setFillLinearGradientEndPoint(c.end);b.setFillLinearGradientColorStops(c.colorStops);b.setFillPriority("linear-gradient")}};Shape.prototype.ProcessShadow=function(a){if(typeof a.color!=="undefined"){return{color:a.color,blur:3,offset:[a.offset[0],a.offset[1]],opacity:a.opacity}}else{return{}}};Shape.prototype.SetShadow=function(a,c){var b=this.ProcessShadow(c);a.setShadowBlur(b.blur);a.setShadowColor(b.color);a.setShadowOffset(b.offset);a.setShadowOpacity(b.opacity)};Shape.prototype.BorderLine=function(d){if(typeof d.strokeType!=="undefined"){if(d.strokeType=="solid"){return new Kinetic.Line({points:d.data,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth})}else{if(d.strokeType=="dotted"){return new Kinetic.Line({points:d.data,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth,dashArray:[d.strokeWidth,d.strokeWidth]})}else{if(d.strokeType=="dashed"){return new Kinetic.Line({points:d.data,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth,dashArray:[d.strokeWidth*3,d.strokeWidth]})}else{if(d.strokeType=="double"){var b=new Kinetic.Group();var c=new Kinetic.Line({points:d.data1,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth/3});var a=new Kinetic.Line({points:d.data2,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth/3});b.add(c);b.add(a);return b}else{if(d.strokeType=="groove"){var b=new Kinetic.Group();var c=new Kinetic.Line({points:d.data1,stroke:(d.strokeWidth===0)?"Transparent":d.strokeOuterDarker,strokeWidth:d.strokeWidth/2});var a=new Kinetic.Line({points:d.data2,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth/2});var f=new Kinetic.Line({points:d.data3,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth/2});b.add(c);b.add(a);b.add(f);return b}else{if(d.strokeType=="ridge"){var b=new Kinetic.Group();var c=new Kinetic.Line({points:d.data1,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth/2});var a=new Kinetic.Line({points:d.data2,stroke:(d.strokeWidth===0)?"Transparent":d.strokeOuterDarker,strokeWidth:d.strokeWidth/2});var f=new Kinetic.Line({points:d.data3,stroke:(d.strokeWidth===0)?"Transparent":d.strokeOuterDarker,strokeWidth:d.strokeWidth/2});b.add(c);b.add(a);b.add(f);return b}else{if(d.strokeType=="inset"){var b=new Kinetic.Group();var c=new Kinetic.Line({points:d.data1,stroke:(d.strokeWidth===0)?"Transparent":d.strokeOuterDarker,strokeWidth:d.strokeWidth/2});var a=new Kinetic.Line({points:d.data2,stroke:(d.strokeWidth===0)?"Transparent":d.strokeInnerDarker,strokeWidth:d.strokeWidth/2});var f=new Kinetic.Line({points:d.data3,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth/2});var e=new Kinetic.Line({points:d.data4,stroke:(d.strokeWidth===0)?"Transparent":d.strokeTopOuterDarker,strokeWidth:d.strokeWidth/2});b.add(c);b.add(a);b.add(f);b.add(e);return b}else{if(d.strokeType=="outset"){var b=new Kinetic.Group();var c=new Kinetic.Line({points:d.data1,stroke:(d.strokeWidth===0)?"Transparent":d.strokeTopOuterDarker,strokeWidth:d.strokeWidth/2});var a=new Kinetic.Line({points:d.data2,stroke:(d.strokeWidth===0)?"Transparent":d.stroke,strokeWidth:d.strokeWidth/2});var f=new Kinetic.Line({points:d.data3,stroke:(d.strokeWidth===0)?"Transparent":d.strokeOuterDarker,strokeWidth:d.strokeWidth/2});var e=new Kinetic.Line({points:d.data4,stroke:(d.strokeWidth===0)?"Transparent":d.strokeInnerDarker,strokeWidth:d.strokeWidth/2});b.add(c);b.add(a);b.add(f);b.add(e);return b}else{return[]}}}}}}}}}};Shape.prototype.DrawPath=function(c,d){var e=d.data;if(typeof e!=="undefined"){c.beginPath();for(var b=0;b<e.length;b++){var a=e[b];if(a.type=="start"){if(a.data.length==2){c.moveTo(a.data[0],a.data[1])}else{throw"Invalid data exception"}}else{if(a.type=="line"){if(a.data.length==2){c.lineTo(a.data[0],a.data[1])}else{throw"Invalid data exception"}}else{if(a.type=="bezier"){if(a.data.length==6){c.bezierCurveTo(a.data[0],a.data[1],a.data[2],a.data[3],a.data[4],a.data[5])}else{throw"Invalid data exception"}}}}}c.closePath()}};Shape.prototype.AddAnimations=function(){if(typeof this.inAnim!=="undefined"){this.animations.push(this.inAnim)}if(typeof this.mainAnim!=="undefined"){this.animations.push(this.mainAnim)}if(typeof this.outAnim!=="undefined"){this.animations.push(this.outAnim)}if(typeof this.typeAnim!=="undefined"){this.animations.push(this.typeAnim)}if(typeof this.clickInAnim!=="undefined"){this.animations.push(this.clickInAnim)}if(typeof this.clickOutAnim!=="undefined"){this.animations.push(this.clickOutAnim)}};Shape.prototype.SetActions=function(a){if(a.shape==="button"){this.SetButtonState(a)}else{if(a.shape==="typing"){this.SetTypingBoxState(a)}else{if(a.shape==="input"){this.SetInputState(a)}else{if(a.shape=="cursor-ellipse"){this.SetCursorEllipseState(a)}else{if(typeof a.clickAction!=="undefined"){this.SetClickAction(a)}}}}}};Shape.prototype.SetClickAction=function(a){this.kShape.on("mouseover",function(){document.body.style.cursor="pointer"});this.kShape.on("mouseout",function(){document.body.style.cursor="default"});if(a.clickAction.doubleClickEnabled){this.kShape.on("dblclick dbltap",function(b){return function(c){b.DoAction(a.clickAction)}}(this))}else{this.kShape.on("click tap",function(b){return function(c){b.DoAction(a.clickAction)}}(this))}this.hasCursorAction=(a.clickAction.action=="StartCursor")};Shape.prototype.DoAction=function(a){if(typeof a!=="undefined"){switch(a.action){case"GotoFrame":document.body.style.cursor="default";Movie.GotoFrame(a.actionArg);Movie.Play();break;case"GotoFirst":document.body.style.cursor="default";Movie.GotoFirst();Movie.Play();break;case"GotoNext":document.body.style.cursor="default";Movie.GotoNext();Movie.Play();break;case"GotoPrevious":document.body.style.cursor="default";Movie.GotoPrevious();Movie.Play();break;case"StartCursor":this.parentFrame.StartCursor();break;case"Pause":Movie.TogglePause();break;case"Accept":this.parentFrame.TryAccept();break;case"Open":document.body.style.cursor="default";document.location.href=a.actionArg;break;case"OpenWithDefault":document.body.style.cursor="default";window.open(a.actionArg,"NewWindow");break;default:break}}};Shape.prototype.SetAnimation=function(){this.SetInEffect();this.SetMainAnim();this.SetOutEffect();if(this.type==="typing"){this.SetTypeAnimation(this.typedText)}if(this.type==="cursor-ellipse"){this.StartClickAnimation()}};Shape.prototype.SetInEffect=function(){if(typeof this.inEffect!=="undefined"){if(this.inEffect.effect==="fade"){this.SetFadeInAnimation()}else{if(this.inEffect.effect==="reveal"){this.SetRevealInAnimation(this.inEffect.duration,this.inEffect.direction)}}}else{this.SetAppearInAnimation()}};Shape.prototype.SetMainAnim=function(){if(typeof this.animation!=="undefined"){if(this.animation.effect==="move"){this.SetMoveAnimation()}else{if(this.animation.effect==="shake"){this.SetShakeAnimation(this.animation.duration)}}}};Shape.prototype.SetOutEffect=function(){if(typeof this.outEffect!=="undefined"){if(this.outEffect.effect==="fade"){this.SetFadeOutAnimation()}else{if(this.outEffect.effect==="reveal"){this.SetRevealOutAnimation(this.outEffect.duration,this.outEffect.direction)}}}else{this.SetAppearOutAnimation()}};Shape.prototype.SetAppearInAnimation=function(){var a=(this.duration==0)?this.parentFrame.frameDuration:this.duration;this.inAnim=new Kinetic.Animation(function(b){return function(c){if(b.isDynamic){c=c-b.interactedTime+b.start;if(Movie.video.paused){c=new Date().getTime()-Movie.startTime-b.interactedTime+b.start}if(b.duration!=0&&c>b.end){b.animations.splice(b.animations.indexOf(b.inAnim),1)}}if(c<b.start){b.kShape.hide()}else{if(c>b.start+a){return}else{if(c>b.start){b.kShape.show()}}}}}(this),this)};Shape.prototype.SetAppearOutAnimation=function(){var a=(this.duration==0)?this.parentFrame.frameDuration:this.duration;this.outAnim=new Kinetic.Animation(function(b){return function(c){if(b.isDynamic){c=c-b.interactedTime+b.start;if(Movie.video.paused){c=new Date().getTime()-Movie.startTime-b.interactedTime+b.start}if(b.duration!=0&&c>b.end){b.animations.splice(b.animations.indexOf(b.inAnim),1)}if(b.duration==0){b.kShape.hide();return}}if(c>b.start+a){b.kShape.hide()}}}(this),this)};Shape.prototype.SetRevealInAnimation=function(b,a){this.inAnim=new Kinetic.Animation(function(c){return function(k){var j,h,f;if(c.isDynamic){k=k-c.interactedTime+c.start;if(Movie.video.paused){k=new Date().getTime()-Movie.startTime-c.interactedTime+c.start}if(c.duration!=0&&k>c.end){c.animations.splice(c.animations.indexOf(c.inAnim),1)}}var g=(k-c.start)/b;c.ClearRevealClippingRect();if(g<=0){c.kShape.hide();return}else{if(g>=1){c.kShape.show();return}}if(!c.kShape.isVisible()){c.kShape.show()}if(c.kShape.nodeType=="Group"){var e=c.kShape.getChildren();for(var d=0;d<e.length;d++){var l=e[d];j=c.ResolveRevealX(l.shapeType);h=c.ResolveRevealY(l.shapeType);f=c.GenerateRevealInClippingRect(j,h,a,g);l.setClippingRect(f)}}else{j=c.ResolveRevealX(c.kShape.shapeType);h=c.ResolveRevealY(c.kShape.shapeType);f=c.GenerateRevealInClippingRect(j,h,a,g);c.kShape.setClippingRect(f)}}}(this),this)};Shape.prototype.SetRevealOutAnimation=function(b,a){this.outAnim=new Kinetic.Animation(function(c){return function(k){var g;var j,h;if(c.isDynamic){var f=c.duration==0?c.end-b:c.end-c.duration;k=k-c.interactedTime+f;if(Movie.video.paused){k=new Date().getTime()-Movie.startTime-c.interactedTime+f}if(c.duration!=0&&k>c.end){c.animations.splice(c.animations.indexOf(c.outAnim),1)}}if(k>c.end){c.ClearRevealClippingRect();c.kShape.hide();return}else{if(k>c.end-b){g=1-((k-(c.end-b))/b)}else{if(k<c.end-b){if(typeof c.inEffect==="undefined"||c.inEffect.effect=="fade"){c.ClearRevealClippingRect()}return}}}if(!c.kShape.isVisible()){c.kShape.show()}if(c.kShape.nodeType=="Group"){var e=c.kShape.getChildren();for(var d=0;d<e.length;d++){var l=e[d];j=c.ResolveRevealX(l.shapeType);h=c.ResolveRevealY(l.shapeType);clippingRect=c.GenerateRevealOutClippingRect(j,h,a,g);l.setClippingRect(clippingRect)}}else{j=c.ResolveRevealX(c.kShape.shapeType);h=c.ResolveRevealY(c.kShape.shapeType);clippingRect=c.GenerateRevealOutClippingRect(j,h,a,g);c.kShape.setClippingRect(clippingRect)}}}(this),this)};Shape.prototype.SetFadeInAnimation=function(){var a=this.inEffect.duration;this.inAnim=new Kinetic.Animation(function(b){return function(e){var d=0;if(b.isDynamic){e=e-b.interactedTime+b.start;if(Movie.video.paused){e=new Date().getTime()-Movie.startTime-b.interactedTime+b.start}if(b.duration!=0&&e>b.end){b.animations.splice(b.animations.indexOf(b.inAnim),1)}}if(e>b.start+a){d=1}else{if(e>b.start){d=(e-b.start)/a}}if(!b.kShape.isVisible()){b.kShape.show()}var c;if(b.type=="cursor-ellipse"){c=d}else{c=d*b.origOpacity}b.kShape.setOpacity(c)}}(this),this)};Shape.prototype.SetFadeOutAnimation=function(){var a=this.outEffect.duration;this.outAnim=new Kinetic.Animation(function(b){return function(e){var d=1;if(b.isDynamic){var c=b.duration==0?b.end-a:b.end-b.duration;e=e-b.interactedTime+c;if(Movie.video.paused){e=new Date().getTime()-Movie.startTime-b.interactedTime+c}if(b.duration!=0&&e>b.end){b.animations.splice(b.animations.indexOf(b.outAnim),1)}}if(e>b.end){b.kShape.hide();d=1}else{if(e>b.end-a){d=1-((e-(b.end-a))/a)}else{if(e<b.end-a){return}}}currentOpac=d*b.origOpacity;b.kShape.setOpacity(currentOpac)}}(this),this)};Shape.prototype.SetMoveAnimation=function(){var b=this.animation.duration;if(this.type=="cursor-ellipse"){b-=400}var c=(this.animation.xTo+(this.GetShapeLength()/2))-this.origX;var a=(this.animation.yTo+(this.GetShapeHeight()/2))-this.origY;this.mainAnim=new Kinetic.Animation(function(d){return function(f){if(d.isDynamic){f=f-d.interactedTime+d.start;if(Movie.video.paused){f=new Date().getTime()-Movie.startTime-d.interactedTime+d.start}}if(f<=d.start){if(d.kShape.nodeType=="Group"||["poly","path","line","cursor-ellipse"].indexOf(d.type)!==-1){d.kShape.setX(0);d.kShape.setY(0)}else{d.kShape.setX(d.origX);d.kShape.setY(d.origY)}d.kShape.hide()}else{if(f>d.start&&f<=d.start+b){var e=(f-d.start)/b;if(d.kShape.nodeType=="Group"||["poly","path","line","cursor-ellipse"].indexOf(d.type)!==-1){d.kShape.setX(c*e);d.kShape.setY(a*e)}else{d.kShape.setX(d.origX+(c*e));d.kShape.setY(d.origY+(a*e))}if(!d.kShape.isVisible()){d.kShape.show()}}}}}(this),this)};Shape.prototype.SetShakeAnimation=function(a){this.mainAnim=new Kinetic.Animation(function(b){return function(d){if(d>b.start&&d<=b.start+a){var c=1-((d-b.start)/a);if(c<0){return}if((b.kShape.nodeType=="Group"&&b.type!=="rect")||["poly","path","line","cursor-ellipse"].indexOf(b.type)!==-1){b.kShape.setX(b.animation.xAlpha*Math.sin(d*2*Math.PI/200));b.kShape.setY(b.animation.yAlpha*Math.sin(d*2*Math.PI/200))}else{b.kShape.setX(b.origX+b.animation.xAlpha*Math.sin(d*2*Math.PI/200));b.kShape.setY(b.origY+b.animation.yAlpha*Math.sin(d*2*Math.PI/200))}}}}(this),this)};Shape.prototype.HasText=function(a){return((typeof a.text!=="undefined")&&(typeof a.text.text!=="undefined"))||((typeof a.imageSource!=="undefined")&&(a.shape!="background"))};Shape.prototype.SetAssociatedRollovers=function(a){if(typeof this.rollover!=="undefined"){this.kShape.on("mouseover",function(b){return function(){for(var c=0;c<a.length;c++){if(b.rollover.indexOf(a[c].id)!=-1){a[c].SetInEffect();if(typeof a[c].inAnim!=="undefined"){a[c].animations.length=0;a[c].animations.push(a[c].inAnim)}else{a[c].kShape.show()}a[c].interactedTime=Movie.video.paused?new Date().getTime()-Movie.startTime:Movie.time}}}}(this));this.kShape.on("mouseout",function(b){return function(){for(var c=0;c<a.length;c++){if(b.rollover.indexOf(a[c].id)!=-1){a[c].SetOutEffect();if(typeof a[c].outAnim!=="undefined"){a[c].animations.length=0;a[c].animations.push(a[c].outAnim)}else{a[c].kShape.hide()}a[c].interactedTime=Movie.video.paused?new Date().getTime()-Movie.startTime:Movie.time}}}}(this))}};Shape.prototype.GetShapeLength=function(){switch(this.type){case"rect":case"text":case"button":case"image":case"typing":return this.kShape.getWidth();case"ellipse":if(this.kShape.nodeType=="Group"){return this.origWidth}else{return(this.kShape.getRadius().x*2)}case"poly":case"line":case"path":case"cursor-ellipse":return this.origWidth}};Shape.prototype.GetShapeHeight=function(){switch(this.type){case"rect":case"text":case"button":case"image":case"typing":return this.kShape.getHeight();case"ellipse":if(this.kShape.nodeType=="Group"){return this.origHeight}else{return(this.kShape.getRadius().y*2)}case"poly":case"line":case"path":case"cursor-ellipse":return this.origHeight}};Shape.prototype.GenerateRevealInClippingRect=function(c,b,d,a){return new Kinetic.Rect({x:(d==="wipeleft")?c+this.GetShapeLength()/2+10:c-this.GetShapeLength()/2-10,y:(d==="wipeup")?b+this.GetShapeHeight()/2+10:b-this.GetShapeHeight()/2-10,width:(d==="wiperight")?(this.GetShapeLength()+20)*a:(d==="wipeleft")?-(this.GetShapeLength()+20)*a:this.GetShapeLength()+20,height:(d==="wipeup")?-(this.GetShapeHeight()+20)*a:(d==="wipedown")?(this.GetShapeHeight()+20)*a:this.GetShapeHeight()+20,})};Shape.prototype.GenerateRevealOutClippingRect=function(c,b,d,a){return new Kinetic.Rect({x:(d==="wiperight")?c+this.GetShapeLength()/2+10:c-this.GetShapeLength()/2-10,y:(d==="wipedown")?b+this.GetShapeHeight()/2+10:b-this.GetShapeHeight()/2-10,width:(d==="wiperight")?-(this.GetShapeLength()+20)*a:(d==="wipeleft")?(this.GetShapeLength()+20)*a:this.GetShapeLength()+20,height:(d==="wipeup")?(this.GetShapeHeight()+20)*a:(d==="wipedown")?-(this.GetShapeHeight()+20)*a:this.GetShapeHeight()+20,})};Shape.prototype.ClearRevealClippingRect=function(){if(this.kShape.nodeType=="Group"){for(var a=0;a<this.kShape.getChildren().length;a++){this.kShape.getChildren()[a].setClippingRect(null)}}else{this.kShape.setClippingRect(null)}};Shape.prototype.ResolveRevealX=function(a){if(this.kShape.nodeType=="Group"){return this.kShape.getX()+this.origX}else{if(a=="Rect"||a=="Text"||a=="Image"||a=="Ellipse"){return this.kShape.getX()}else{if(a=="Polygon"||a=="Line"){return this.kShape.getX()+this.origX}else{if(typeof a==="undefined"){return this.kShape.getX()+this.origX}}}}};Shape.prototype.ResolveRevealY=function(a){if(this.kShape.nodeType=="Group"){return this.kShape.getY()+this.origY}else{if(a=="Rect"||a=="Text"||a=="Image"||a=="Ellipse"){return this.kShape.getY()}else{if(a=="Polygon"||a=="Line"){return this.kShape.getY()+this.origY}else{if(typeof a==="undefined"){return this.kShape.getY()+this.origY}}}}};Shape.prototype.CalculateVAlignBasedY=function(a){if(a.text.verticalAlign=="top"){return(a.text.y+(a.text.height/2))}else{if(a.text.verticalAlign=="bottom"){return(a.text.y+(a.text.height/2))+a.text.height-a.imageHeight}else{return(a.text.y+(a.text.height/2))+(a.text.height/2)-(a.imageHeight/2)}}};Shape.prototype.SetButtonState=function(b){if(this.HasText(b)){for(var c=0;c<this.kShape.getChildren().length;c++){var a=this.kShape.getChildren()[c];if(a.shapeType==="Rect"){this.buttonRectShape=a}if(a.shapeType==="Text"){this.buttonTextShape=a}}}else{this.buttonRectShape=this.kShape}this.SetButtonDisplay(b);if(typeof b.clickAction!=="undefined"){if(b.clickAction.doubleClickEnabled){this.kShape.on("dblclick dbltap",function(d){return function(e){d.DoAction(b.clickAction)}}(this))}else{this.kShape.on("click tap",function(d){return function(e){d.DoAction(b.clickAction)}}(this))}this.hasCursorAction=(b.clickAction.action=="StartCursor")}else{this.kShape.on("click tap",function(d){return function(e){}}(this))}};Shape.prototype.SetButtonDisplay=function(a){this.kShape.on("mouseover mouseup",function(b){return function(){document.body.style.cursor="pointer";var c=a.hover;var d=(c.strokeWidth===0)?"Transparent":c.stroke;var e=(c.text.fontStyle==="normal")?c.text.fontWeight:c.text.fontStyle;b.SetFill(b.buttonRectShape,c.fill);b.buttonRectShape.setStroke(d);b.buttonRectShape.setStrokeWidth(c.strokeWidth);if(b.HasText(a)){b.buttonTextShape.setFill(c.text.textFill);b.buttonTextShape.setFontSize(c.text.fontSize);b.buttonTextShape.setFontStyle(e)}}}(this));this.kShape.on("mouseout touchend",function(b){return function(){document.body.style.cursor="default";var c=(a.strokeWidth===0)?"Transparent":a.stroke;var d=(a.text.fontStyle==="normal")?a.text.fontWeight:a.text.fontStyle;b.SetFill(b.buttonRectShape,a.fill);b.buttonRectShape.setStroke(c);b.buttonRectShape.setStrokeWidth(a.strokeWidth);if(b.HasText(a)){b.buttonTextShape.setFill(a.text.textFill);b.buttonTextShape.setFontSize(a.text.fontSize);b.buttonTextShape.setFontStyle(d)}}}(this));this.kShape.on("mousedown touchstart",function(b){return function(){var c=a.pressed;var d=(c.strokeWidth===0)?"Transparent":c.stroke;var e=(c.text.fontStyle==="normal")?c.text.fontWeight:c.text.fontStyle;b.SetFill(b.buttonRectShape,c.fill);b.buttonRectShape.setStroke(d);b.buttonRectShape.setStrokeWidth(c.strokeWidth);if(b.HasText(a)){b.buttonTextShape.setFill(c.text.textFill);b.buttonTextShape.setFontSize(c.text.fontSize);b.buttonTextShape.setFontStyle(e)}}}(this))};Shape.prototype.SetCursorEllipseState=function(a){this.endAction;this.clickInAnim;this.clickOutAnim;if(typeof a.clickAction!=="undefined"){this.SetClickAction(a)}if(typeof a.endAction!=="undefined"){this.endAction=a.endAction}};Shape.prototype.StartClickAnimation=function(){var d;if((typeof this.inEffect==="undefined")&&(typeof this.animation==="undefined")){d=this.start}else{if((typeof this.animation==="undefined")&&(typeof this.inEffect.duration!=="undefined")){d=this.start+this.inEffect.duration}else{d=this.start+this.animation.duration}}d-=400;for(var c=0;c<this.kShape.getChildren().length;c++){var f=this.kShape.getChildren()[c];if(f.shapeType=="Ellipse"){var e=150;var b=250;var a=false;this.clickInAnim=new Kinetic.Animation(function(g){return function(i){if(g.isDynamic){i=i-g.interactedTime+g.start;if(Movie.video.paused){i=new Date().getTime()-Movie.startTime-g.interactedTime+g.start}}var h;h=(i-d)/e;if(h<0){f.setOpacity(g.origOpacity);a=false;return}else{if(h>1){return}}f.setOpacity(h*0.9)}}(this),this);this.clickOutAnim=new Kinetic.Animation(function(g){return function(j){if(g.isDynamic){j=j-g.interactedTime+g.start;if(Movie.video.paused){j=new Date().getTime()-Movie.startTime-g.interactedTime+g.start}}var h=1-(j-(d+e))/b;if(h<=0.2){if(!a){if(typeof g.endAction!=="undefined"&&g.endAction.action=="Pause"){g.DoAction(g.endAction)}a=true}return}else{if(h>1){return}}var i=h*0.9;if(i<g.origOpacity){f.setOpacity(g.origOpacity)}else{f.setOpacity(i)}}}(this),this);return}}};Shape.prototype.SetInputState=function(b){for(var c=0;c<this.kShape.getChildren().length;c++){var a=this.kShape.getChildren()[c];if(a.shapeType==="Text"){this.inputTextShape=a}}this.inputAttemptsTried=0;this.inputEntries=b.inputInfo.entries;this.inputAttemptsAllowed=b.inputInfo.attempts;this.successAction=b.successAction;this.failureAction=b.failureAction;this.hintBubbleIds=b.inputInfo.hint;this.successBubbleIds=b.inputInfo.success;this.failureBubbleIds=b.inputInfo.failure;this.successShapes=new Array();this.failureShapes=new Array();this.inputTextShape.setPadding(2);this.inputTextShape.setFontFamily(b.text.fontFamily);this.inputTextShape.setFontStyle(b.text.fontWeight);this.inputTextShape.setFontSize(b.text.fontSize);this.inputTextShape.setFill(b.text.textFill);if((typeof this.successAction!=="undefined"&&this.successAction.action=="StartCursor")||(typeof this.failureAction!=="undefined"&&this.failureAction.action=="StartCursor")){this.hasCursorAction=true}this.SetInputEvents(b)};Shape.prototype.SetInputEvents=function(b){var a=null;this.kShape.on("mouseover",function(){document.body.style.cursor="text"});this.kShape.on("mouseout",function(){document.body.style.cursor="default"});this.kShape.on("click tap",function(c){return function(d){if(a==null){a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("value",c.inputTextShape.getText());$(a).css("position","absolute");$(a).css("height",b.height-6);$(a).css("width",b.width-4);$(a).css("left",b.x);$(a).css("top",b.y);$(a).css("font-family",b.text.fontFamily);$(a).css("font-size",b.text.fontSize);$(a).css("color",b.text.textFill);$(a).css("font-style",b.text.fontStyle);$(a).css("font-weight",b.text.fontWeight);$(a).css("background-color",b.fill.color1);$(a).css("-moz-box-sizing","content-box");$(a).css("-webkit-box-sizing","content-box");$(a).css("box-sizing","content-box");$(".kineticjs-content").append(a);$(a).focus();$(a).blur(function(){c.inputTextShape.setFontFamily(b.text.fontFamily);c.inputTextShape.setFontSize(b.text.fontSize);c.inputTextShape.setFontStyle(b.text.fontWeight);c.inputTextShape.setFill(b.text.textFill);c.inputTextShape.setText(this.value);$(this).remove();a=null});$(a).keydown(function(e){if(e.which==13){c.inputTextShape.setFontFamily(b.text.fontFamily);c.inputTextShape.setFontSize(b.text.fontSize);c.inputTextShape.setFontStyle(b.text.fontWeight);c.inputTextShape.setFill(b.text.textFill);c.inputTextShape.setText(this.value);$(this).remove();a=null;c.HandleInputSubmit(this.value)}})}}}(this))};Shape.prototype.SetInputCallouts=function(b){if(typeof this.hintBubbleIds!=="undefined"){this.kShape.on("mouseover",function(c){return function(){for(var d=0;d<b.length;d++){if(c.hintBubbleIds.indexOf(b[d].id)!=-1){b[d].SetInEffect();if(typeof b[d].inAnim!=="undefined"){b[d].animations.length=0;b[d].animations.push(b[d].inAnim)}else{b[d].kShape.show()}b[d].interactedTime=Movie.video.paused?new Date().getTime()-Movie.startTime:Movie.time}}}}(this));this.kShape.on("mouseout",function(c){return function(){for(var d=0;d<b.length;d++){if(c.hintBubbleIds.indexOf(b[d].id)!=-1){b[d].SetOutEffect();if(typeof b[d].outAnim!=="undefined"){b[d].animations.length=0;b[d].animations.push(b[d].outAnim)}else{b[d].kShape.hide()}b[d].interactedTime=Movie.video.paused?new Date().getTime()-Movie.startTime:Movie.time}}}}(this))}if(typeof this.successBubbleIds!=="undefined"){for(var a=0;a<b.length;a++){if(this.successBubbleIds.indexOf(b[a].id)!=-1){this.successShapes.push(b[a])}}}if(typeof this.failureBubbleIds!=="undefined"){for(var a=0;a<b.length;a++){if(this.failureBubbleIds.indexOf(b[a].id)!=-1){this.failureShapes.push(b[a])}}}};Shape.prototype.HandleInputSubmit=function(a){this.inputAttemptsTried++;var e=false;var b=0;if(this.inputEntries.indexOf(a)!=-1){e=true}if((this.inputAttemptsTried<this.inputAttemptsAllowed)&&!e){if(typeof this.failureShapes!=="undefined"){for(var c=0;c<this.failureShapes.length;c++){this.failureShapes[c].SetAnimation();this.failureShapes[c].animations.length=0;this.failureShapes[c].AddAnimations();this.failureShapes[c].interactedTime=Movie.video.paused?new Date().getTime()-Movie.startTime:Movie.time;b=Math.max(b,this.failureShapes[c].duration)}}return e}if(e){if(typeof this.successShapes!=="undefined"){for(var c=0;c<this.successShapes.length;c++){this.successShapes[c].SetAnimation();this.successShapes[c].animations.length=0;this.successShapes[c].AddAnimations();this.successShapes[c].interactedTime=Movie.video.paused?new Date().getTime()-Movie.startTime:Movie.time;b=Math.max(b,this.successShapes[c].duration)}var d=this;setTimeout(function(){d.DoAction(d.successAction)},b)}else{var d=this;setTimeout(function(){d.DoAction(d.successAction)},b)}}else{var d=this;setTimeout(function(){d.DoAction(d.failureAction)},b)}if(this.inputAttemptsTried==this.inputAttemptsAllowed||e){this.inputAttemptsTried=0}};Shape.prototype.SetTypingBoxState=function(b){this.typeAnim;this.typeTimer;this.typingProps=b.typedText;this.origText=(typeof b.text.text==="undefined")?"":b.text.text;for(var c=0;c<this.kShape.getChildren().length;c++){var a=this.kShape.getChildren()[c];if(a.shapeType==="Text"){this.typingBoxTextShape=a}}};Shape.prototype.SetTypeAnimation=function(){var a=(typeof this.inEffect!=="undefined")?this.start+this.inEffect.duration:this.start;var b=this.typingProps.duration;var c=this.typingProps.typedText;this.typeAnim=new Kinetic.Animation(function(d){return function(h){var f=(h-d.start)/b;if(f>0&&f<=1){var e=Math.ceil(c.length*f);var g=d.origText+c.substr(0,e);if(g!=d.typingBoxTextShape.getText()){d.typingBoxTextShape.setText(g)}}else{if(f>1){d.typingBoxTextShape.setText(d.origText+c)}else{d.typingBoxTextShape.setText(d.origText)}}}}(this),this)};function Timer(d,b){var a,c;this.origDelay=b;this.remaining=b;this.pause=function(){clearTimeout(a);this.remaining-=(new Date()-c)};this.resume=function(){c=new Date();a=setTimeout(d,this.remaining)};this.fired=function(){return(this.remaining<=0)}};function FSetStyleAttributes(b,a){FSetStyleAttribute(b,"color",a);FSetStyleAttribute(b,"fontSize",a);FSetStyleAttribute(b,"fontWeight",a);FSetStyleAttribute(b,"fontStyle",a);FSetStyleAttribute(b,"borderLeft",a);FSetStyleAttribute(b,"borderRight",a);FSetStyleAttribute(b,"borderTop",a);FSetStyleAttribute(b,"borderBottom",a);FSetStyleAttribute(b,"backgroundColor",a);FSetStyleAttribute(b,"backgroundImage",a)}function FResetStyleAttributes(a){a.mcState=null;if(a.mcChecked){FSetStyleAttributes(a,"Checked");return}FResetStyleAttribute(a,"color");FResetStyleAttribute(a,"fontSize");FResetStyleAttribute(a,"fontWeight");FResetStyleAttribute(a,"fontStyle");FResetStyleAttribute(a,"borderLeft");FResetStyleAttribute(a,"borderRight");FResetStyleAttribute(a,"borderTop");FResetStyleAttribute(a,"borderBottom");FResetStyleAttribute(a,"backgroundColor");FResetStyleAttribute(a,"backgroundImage")}function FMimicOnMouseOver(a){if(a.mcState!="Pressed"){FSetStyleAttributes(a,"Hover");a.mcState="Hover"}}function FMimicOnMouseDown(a){FResetStyleAttributes(a);FSetStyleAttributes(a,"Pressed");a.mcState="Pressed"}function FMimicOnMouseUp(a){FResetStyleAttributes(a);FSetStyleAttributes(a,"Hover");a.mcState="Hover"}function FMimicOnMouseOut(b,c){var a=b.relatedTarget||b.toElement;if(!FIsSubNode(a,c)){FResetStyleAttributes(c)}}function FIsSubNode(c,b){if(c==null){return null}for(var a=c;;a=a.parentNode){if(a==b){return true}if(a==document.body){return false}if(a==null){return false}}}function FMimicGetPosition(c){var a=0;var b=0;if(c.offsetParent){a=c.offsetTop;b=c.offsetLeft;while(c=c.offsetParent){a+=c.offsetTop;b+=c.offsetLeft}}return{x:b,y:a}}function FMimicGetMousePosition(a){if(typeof(a.pageX)!="undefined"){return{x:a.pageX,y:a.pageY}}else{if(typeof(a.clientX)!="undefined"){return{x:a.clientX,y:a.clientY}}}}function FMimicGetComputedStyle(c,b){var d=null;if(c.currentStyle){d=c.currentStyle[b]}else{if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(c,null);if(a){d=a[b]}}}return d}function FCheckItem(b,a){b.mcChecked=a;FResetStyleAttributes(b);if(b.mcState!=null){FSetStyleAttributes(b,b.mcState)}}function FSetStyleAttribute(c,h,d){var g=h+d;var f=FFindAttributeHolder(c,g);if(f==null){return}var e=f.getAttribute(g);if(e==null){return}var a=h+"_saved";var b=FGetStyle(f,h);if(f.getAttribute(a)==null){f.setAttribute(a,b)}f.style[h]=e;if(FDistributableProp(h)){FDistributeStyleAttribute(f,h,e)}}function FDistributableProp(a){if(a=="color"){return true}if(a=="textDecoration"){return true}if(a=="font"){return true}if(a=="fontFamily"){return true}if(a=="fontSize"){return true}if(a=="fontStyle"){return true}if(a=="fontWeight"){return true}return false}function FResetStyleAttribute(b,e){var a=e+"_saved";var d=FFindAttributeHolder(b,a);if(d==null){return}var c=d.getAttribute(a);if(c==null){return}d.style[e]=c;if(FDistributableProp(e)){FDistributeStyleAttribute(d,e,c)}}function FGetStyle(a,b){return FMimicGetComputedStyle(a,b)}function FSetStyle(b,c,a){b.style[c]=a}function FDistributeStyleAttribute(c,e,b){for(var a=0;a<c.childNodes.length;a++){var d=c.childNodes[a];if(d.nodeType!=1){continue}FSetStyle(d,e,b);FDistributeStyleAttribute(d,e,b)}}function FFindAttributeHolder(d,f){var c=d.getAttribute(f);if(c!=null){return d}for(var b=0;b<d.childNodes.length;b++){var e=d.childNodes[b];if(e.nodeType!=1){continue}var a=FFindAttributeHolder(e,f);if(a!=null){return a}}return null};Frame.prototype.SetTransition=function(){this.transitionAnim;if(this.transitionEffect==="fade"){this.SetFadeTransition()}else{if(this.transitionEffect==="slide"){this.SetSlideTransition()}else{if(this.transitionEffect==="push"){this.SetPushTransition(this.movie.frames[this.frameIndex-2])}else{this.SetVisibleAnimation()}}}};Frame.prototype.SetVisibleAnimation=function(){this.transitionAnim=new Kinetic.Animation(function(a){return function(b){if(b>a.frameStart+a.transitionDuration){return}else{if(b>a.frameStart){a.Reset()}}if(!a.group.isVisible()){a.group.show()}}}(this),this)};Frame.prototype.SetFadeTransition=function(){this.transitionAnim=new Kinetic.Animation(function(a){return function(c){var b=0;if(c>a.frameStart+a.transitionDuration){b=1}else{if(c>a.frameStart){b=(c-a.frameStart)/a.transitionDuration}}if(!a.group.isVisible()){a.group.show()}a.group.setOpacity(b)}}(this),this)};Frame.prototype.SetSlideTransition=function(){var d;var b;var a;var c;if(this.transitionDirection=="right"){d=this.movie.layer.getCanvas().getWidth();b=0;a=this.group.getX()-this.movie.layer.getCanvas().getWidth();c=this.group.getY()}else{if(this.transitionDirection=="left"){d=-(this.movie.layer.getCanvas().getWidth());b=0;a=this.group.getX()+this.movie.layer.getCanvas().getWidth();c=this.group.getY()}else{if(this.transitionDirection=="up"){d=0;b=-(this.movie.layer.getCanvas().getHeight());a=this.group.getX();c=this.group.getY()+this.movie.layer.getCanvas().getHeight()}else{if(this.transitionDirection=="down"){d=0;b=this.movie.layer.getCanvas().getHeight();a=this.group.getX();c=this.group.getY()-this.movie.layer.getCanvas().getHeight()}}}}this.transitionAnim=new Kinetic.Animation(function(e){return function(g){var f=0;if(g>e.frameStart+e.transitionDuration){f=1}else{if(g>e.frameStart){f=(g-e.frameStart)/e.transitionDuration}}if(!e.group.isVisible()){e.group.show()}e.group.setX(a+(f*d));e.group.setY(c+(f*b))}}(this),this)};Frame.prototype.SetPushTransition=function(e){var d;var b;var a;var c;if(this.transitionDirection=="right"){d=this.movie.layer.getCanvas().getWidth();b=0;a=this.group.getX()-this.movie.layer.getCanvas().getWidth();c=this.group.getY()}else{if(this.transitionDirection=="left"){d=-(this.movie.layer.getCanvas().getWidth());b=0;a=this.group.getX()+this.movie.layer.getCanvas().getWidth();c=this.group.getY()}else{if(this.transitionDirection=="up"){d=0;b=-(this.movie.layer.getCanvas().getHeight());a=this.group.getX();c=this.group.getY()+this.movie.layer.getCanvas().getHeight()}else{if(this.transitionDirection=="down"){d=0;b=this.movie.layer.getCanvas().getHeight();a=this.group.getX();c=this.group.getY()-this.movie.layer.getCanvas().getHeight()}}}}this.transitionAnim=new Kinetic.Animation(function(f){return function(h){var g=0;if(h>f.frameStart+f.transitionDuration){if(typeof e!=="undefined"){e.Reset()}g=1}else{if(h>f.frameStart){g=(h-f.frameStart)/f.transitionDuration}}if(!f.group.isVisible()){f.group.show()}f.group.setX(a+(g*d));f.group.setY(c+(g*b));if(typeof e!=="undefined"&&g!=1){e.group.setX(g*d);e.group.setY(g*b)}}}(this),this)};Frame.prototype.Reset=function(){this.group.setX(0);this.group.setY(0);this.group.setOpacity(1)};/*]]>*/</script>
    </head>
    <body>
        <div id="MimicMovieHost" class="hasFrames">
            <div class="toolbar_html5">
                <div class="timelineWrapper">
                    <div class="timelineLeft">
                    </div>
                    <div class="timeline">
                    </div>
                </div>
                <div class="navigateWrapper">
                    <a class="prevFrameButton" onclick="FMimicGotoPrev()">
                    </a>
                    <a class="playing playButton" onclick="FMimicPause()">
                    </a>
                    <a class="nextFrameButton" onclick="FMimicGotoNext()">
                    </a>
                </div>
                <div class="timeWrapper">
                    <span class="timeProgressSpan">0:00</span>
                    <span class="timeDividerSpan">/</span>
                    <span class="timeTotalSpan">0:00</span>
                </div>
                <div class="volumeWrapper">
                    <a class="volumeButton">
                    </a>
                    <div class="volumePopup">
                        <div class="volume">
                        </div>
                        <div class="volumeBottom">
                        </div>
                    </div>
                </div>
                <div class="navigateMoviesWrapper">
                    <a class="prevMovieButton" onclick="FMimicGotoPrevMovie()">
                    </a>
                    <a class="nextMovieButton" onclick="FMimicGotoNextMovie()">
                    </a>
                </div>
            </div>
            <div class="incompatibleWrapper">
                <div class="incompatibleOverlay">
                </div>
            </div>
            <div class="playOverlayWrapper">
                <button class="playOverlay" onclick="StartMobile()">
                </button>
            </div>
            <video id="movie_media" preload="auto" width="618" height="526">
                <source src="videos/oneFrame/interactive/oneFrame.webm" type="video/webm;" codecs="vorbis,vp8" />
            </video>
        </div>
    </body>
</html>